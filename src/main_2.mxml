<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication name="glitterApp" initialize="init()" resizing="true" dropShadowEnabled="true" height="700" width="1000" xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:GlitterComp="*" layout="absolute" cornerRadius="15" xmlns:ns1="glitter.*">
	<mx:states>
		<mx:State name="getFriendsTimeline">		
			<mx:SetEventHandler target="{home}" name="click" 
				handler="display.getFriendsTimeline(Twitter.getStoredUserName(),Twitter.getStoredPassword())" />
		</mx:State>
		<mx:State name="getReplies">
			<mx:SetEventHandler target="{replies}" name="click" 
				handler="display.getReplies(Twitter.getStoredUserName(),Twitter.getStoredPassword())"/>
		</mx:State>
		<mx:State name="getUserTimeline">
			<mx:SetEventHandler target="{updates}" name="click" 
				handler="display.getUserTimeline(Twitter.getStoredUserName(),Twitter.getStoredPassword())"/>
		</mx:State>
	</mx:states>
	<mx:Script>
		<![CDATA[
			import glitter.*;
			import glitter.twitter.*;
			import mx.containers.TitleWindow;
			import flash.filters.DropShadowFilter;

			private var controller:ApplicationController;
			private var helpWindow:HelpWindow;
			
			private function init():void {
				controller = new ApplicationController(this);
			}

			private function launchHelpWindow():void {
				helpWindow = new HelpWindow(mainCanvas);//theWindow;//
			}
		]]>
	</mx:Script>
    <mx:Glow id="glowImage" duration="1000"
        alphaFrom="1.0" alphaTo="0.3" 
        blurXFrom="0.0" blurXTo="50.0" 
        blurYFrom="0.0" blurYTo="50.0" 
        color="0xFFFFFF"/>
	<mx:ApplicationControlBar dock="true" height="25" paddingTop="2" fillAlphas="[1.0, 1.0]" fillColors="[#050505, #050505]" width="100%">
		<mx:Label text="Glitter" width="60" height="20" id="nameLabel" fontFamily="Verdana" fontSize="12" fontWeight="bold" color="#BBB517"/>
		<mx:Spacer width="100%" />
		<mx:LinkButton label="?" color="#C9BD6C" fontSize="10" id="helpLink" enabled="true" click="launchHelpWindow();"/>
		<mx:Button height="16" icon="@Embed(source='../images/Settings-16x16.png')" width="16" click="controller.settingsButtonClick();"/>
	</mx:ApplicationControlBar>
	<mx:Canvas x="0" y="0" width="100%" height="100%" cornerRadius="20" id="mainCanvas">
		<mx:Canvas x="173" width="300" cornerRadius="15" backgroundColor="#B97272" top="10" bottom="10" id="tweets" label="tweets">
			<mx:Label y="2" text="tweets" color="#FFFFFF" fontWeight="bold" left="10" right="10"/>
			<ns1:TweetDisplay id="display" left="10" right="10" bottom="110" top="20" width="100%" height="100%">				
			</ns1:TweetDisplay>
			<ns1:Navi x="10" bottom="10">
			</ns1:Navi>
		</mx:Canvas>
		<mx:Canvas cornerRadius="15" backgroundColor="#6485AE" top="10" bottom="10" id="photos" label="photos" right="10" left="481">
			<mx:VBox backgroundColor="#8EA4BE" top="20" left="10" bottom="10" right="10">
			</mx:VBox>
			<mx:Label y="2" text="photos" color="#FFFFFF" fontWeight="bold" right="10" left="10"/>
		</mx:Canvas>
		<mx:Canvas width="157" cornerRadius="15" backgroundColor="#C9BD6C" id="folders" label="folders" x="10" height="654" y="10">
			<mx:VBox id="foldersVBox" backgroundColor="#D1D089" right="10" left="10" top="20" bottom="10" horizontalAlign="center">
				<mx:Spacer height="10" />
				<mx:Canvas width="110" height="78" id="image1canvas" label="friend's thread" mouseDownEffect="{glowImage}">
					<mx:Image source="@Embed('../images/lightbox2.png')"/>
				</mx:Canvas>
				<mx:Label text="friend's thread" />
				<mx:Spacer height="10" />
				<mx:Canvas width="110" height="78" id="image2canvas" label="friend's thread" mouseDownEffect="{glowImage}">
					<mx:Image source="@Embed('../images/lightbox2.png')"/>
				</mx:Canvas>
				<mx:Label text="personal collection" />
				<mx:Button label="Home" id="home" mouseDown="currentState='getFriendsTimeline'"/>
				<mx:Button label="@Replies" id="replies" mouseDown="currentState='getReplies'"/>
				<mx:Button label="Updates" id="updates" mouseDown="currentState='getUserTimeline'"/>
					</mx:VBox>
			<mx:Label y="2" text="lightboxes" color="#FFFFFF" fontWeight="bold" left="10" right="10"/>
		</mx:Canvas>
	</mx:Canvas>
</mx:WindowedApplication>
